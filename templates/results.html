{% extends "base.html" %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Challenge Results</h1>
<p class="text-xl mb-4">Congratulations, {{ username }}!</p>
<p class="text-lg mb-2">Your total score: {{ score }} out of {{ max_possible_score }}</p>
<p class="text-lg mb-4">Total time taken: {{ "%.2f"|format(duration) }} seconds</p>

<h2 class="text-2xl font-bold mt-8 mb-4">Detailed Results</h2>
{% for question_id, answer in answers.items() %}
    <div class="mb-8 p-4 border rounded">
        <h3 class="text-xl font-bold mb-2">Question {{ question_id + 1 }}</h3>
        <p class="mb-2"><strong>Time Score:</strong> {{ answer.time_score }} / {{ MAX_SCORE_PER_QUESTION - 60 }}</p>
        <p class="mb-2"><strong>Correctness Score:</strong> {{ answer.correctness_score }} / 60</p>
        <p class="mb-2"><strong>Total Score:</strong> {{ answer.total_score }} / {{ MAX_SCORE_PER_QUESTION }}</p>
        <h4 class="text-lg font-bold mt-4 mb-2">Your Code:</h4>
        <pre class="bg-gray-100 p-2 rounded"><code>{{ answer.code }}</code></pre>
        <h4 class="text-lg font-bold mt-4 mb-2">Evaluation:</h4>
        <p>{{ answer.evaluation }}</p>
    </div>
{% endfor %}

<a href="/" class="bg-blue-500 text-white px-4 py-2 rounded">Back to Home</a>
{% endblock %}